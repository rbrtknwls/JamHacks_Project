<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Calculator</title>
    <script src="http://www.chartjs.org/dist/2.7.2/Chart.bundle.js"></script>
    <script src="http://www.chartjs.org/samples/latest/utils.js"></script>
    <script src="js/html5shiv.js"></script>
    <script src="js/jquery.min.js"></script>
    <script src="js/skel.min.js"></script>
    <script src="js/skel-layers.min.js"></script>
    <script src="js/init.js"></script>
    <noscript>
        <link rel="stylesheet" href="css/skel.css"/>
        <link rel="stylesheet" href="css/style.css"/>
        <link rel="stylesheet" href="css/style-xlarge.css"/>
    </noscript>
</head>
<body id="top">
    
    <!--Header-->
    <header id="header" class="skel-layers-fixed">
        <h1><a href="#"></a></h1>
        <nav id="nav">
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="calculator.html">Calculator</a></li>
                <li><a href= "learnmore.html">Research</a></li>
            </ul>
        </nav>
    </header>

    <br>
    <p>Hours of sleep: <input id = "sleep" type = "number" value = "1"> Difficulty of test: <input type="range" min="1" max="100" value="50" class="slider" id="difficulty">Amount studied so far: <input id = "studypre" type = "number" value = "1"></p>
    <p id="sliderValue"></p>
    <script>
        document.getElementById("difficulty").oninput = function(){
            document.getElementById("sliderValue").innerText = document.getElementById("difficulty").value
        }
        document.getElementById("sliderValue").innerText = document.getElementById("difficulty").value
    </script>

<div class="chart-container" style="height:100vh; width:70vw">
    <canvas id="StudyingChart" width="600" height="400"></canvas>
</div>

<!-- JS -->
<script>

    var ctx = document.getElementById("StudyingChart").getContext('2d');
    
    function pf(st) {
        return(pc(st) - (100-ps(st)))
    }
    
    function ps(st) {
        return(100- ((st *st) + 3.2)/90783)
    }
    
    function pc(st) {
        // 1.67705098312 * âˆšx + 55
        return((2 * Math.sqrt(st)) + 65)
    }

    totalMins = 720
    
    timest = []
    timesl = []
    timef = []
    
    for(i = -1; i < totalMins; i+=60){
        timest.push(i+1)
        timesl.push(i+1)
        timef.push(i+1)
    }


    dataPrest = []
    dataPresl = []
    dataPref = []
    for (i = 0; i < timest.length; i++) {
        if (pc(timest[i]) > 100) dataPrest.push(100);
        else dataPrest.push(pc(timest[i]));
    }
    
    for (i = 0; i < timesl.length; i++) {
        if (ps(timesl[i]) < 0) dataPresl.push(0);
        else dataPresl.push(ps(timesl[i]));
    }
    
    for (i = 0; i < timef.length; i++) {
        if (pf(timef[i]) > 100) dataPref.push(100);
        else dataPref.push(pf(timef[i]));
        console.log(pf(timef[i]));
    }
    timeMinListst = timest
    timeMinListsl = timesl
    timeMinListf = timef
    for(i = 0; i < timeMinListst.length; i++){
        timeMinListst[i] = timeMinListst[i]/60
        timeMinListsl[i] = timeMinListsl[i]/60
        timeMinListf[i] = timeMinListf[i]/60
    }

    var StudyingChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: timeMinListst, //Time studying
            datasets: [{
                label: 'Studying Coefficient',
                data: dataPrest, //Studying
                backgroundColor: [
                    'rgba(255, 0, 0, 0.2)'
                ],
                borderColor: [
                    'rgb(255, 0, 0)'
                ],
                borderWidth: 1
            },{
                label: 'Amount of Sleep',
                data: dataPresl, //Sleep
                backgroundColor: [
                    'rgba(0, 0, 255, 0.2)'
                ],
                borderColor: [
                    'rgb(0, 0, 255)'
                ],
                borderWidth: 1
            },{
                    label: 'Time studying',
                data: dataPref, //Final
                backgroundColor: [
                    'rgba(255, 255, 0, 0.2)'
                ],
                borderColor: [
                    'rgb(255, 255, 0)'
                ],
                borderWidth: 1
            }]
        }
    });

</script>

</body>
</html>